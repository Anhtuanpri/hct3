/* ========== Reset & Vars ========== */
*{box-sizing:border-box}
html,body{height:100%}
:root{
  --bg:#0b1220; --panel:#0f172a; --panel2:#0b152c; --text:#e5e7eb; --muted:#94a3b8;
  --border:#1f2937; --accent:#22d3ee; --danger:#ef4444; --chip:#0b152c;
}
.light{
  --bg:#f6f7fb; --panel:#ffffff; --panel2:#f8fafc; --text:#0f172a; --muted:#64748b;
  --border:#e5e7eb; --accent:#0891b2; --danger:#b91c1c; --chip:#eef2ff;
}
body{
  margin:0; font-family:Inter, -apple-system, system-ui, "Apple Color Emoji",
               "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", Arial, sans-serif;
  background:var(--bg); color:var(--text); display:flex; flex-direction:column;
}

/* ========== Header ========== */
.app-header{
  position:sticky; top:0; z-index:5;
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:12px 14px; border-bottom:1px solid var(--border);
  background:linear-gradient(180deg,#0c1324,#0b1220);
}
.light .app-header{background:linear-gradient(180deg,#fff,#f8fafc)}
.brand{display:flex; align-items:center; gap:10px}
.logo{width:32px;height:32px;border-radius:10px;display:flex;align-items:center;justify-content:center;
  background:linear-gradient(180deg,#22d3ee,#38bdf8); box-shadow:0 8px 18px rgba(34,211,238,.28)}
.title h1{margin:0;font-size:18px}
.title .sub{font-size:12px;color:var(--muted)}

.actions{display:flex; gap:8px; align-items:center}
.btn{background:transparent;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:.45rem .6rem;cursor:pointer}
.btn.danger{border-color:rgba(239,68,68,.5)}
.btn:hover{border-color:#334155}

/* Ribbon */
.ribbon{
  display:flex;align-items:center;gap:8px;padding:.28rem .55rem;border-radius:999px;
  border:1px solid rgba(245,158,11,.45);
  background:linear-gradient(180deg,rgba(245,158,11,.18),rgba(245,158,11,.08));
  color:#fde68a;font-weight:700;font-size:.85rem
}
.chip{background:var(--chip); color:var(--text); border:1px solid var(--border); border-radius:999px; padding:.15rem .45rem; cursor:pointer}
.star{width:14px;height:14px;display:inline-block;background:conic-gradient(from 18deg at 50% 50%, #fbbf24 0 18%, transparent 18% 100%);
  -webkit-mask:radial-gradient(circle at 50% 50%, #000 60%, transparent 61%);
  clip-path:polygon(50% 0,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%);
  filter:drop-shadow(0 0 6px rgba(251,191,36,.6))}

/* ========== Chat ========== */
.chat{flex:1; overflow-y:auto; padding:12px}
#messages{list-style:none; margin:0; padding:0}
.message{
  position:relative; max-width:78%; margin:10px 0; padding:10px 12px;
  background:var(--panel2); border:1px solid var(--border); border-radius:12px;
  word-wrap:break-word; box-shadow:0 10px 20px rgba(0,0,0,.12);
}
.message{ margin-right:auto }          /* Left (others) */
.message.me{ margin-left:auto; margin-right:0; background:linear-gradient(180deg,#0c152d,#0b152c); border-color:#1d4ed8 }
.light .message.me{ background:#eff6ff; border-color:#93c5fd }

.message .text{white-space:pre-wrap; line-height:1.45}
.message .meta{font-size:11px;color:var(--muted);margin-top:6px}

/* Under row */
.under{display:flex; align-items:center; justify-content:space-between; margin-top:6px}
.icon.mini{background:transparent; border:0; color:var(--text); cursor:pointer; padding:2px 6px; border-radius:8px; font-size:14px}
.icon.mini.like.on{filter: drop-shadow(0 0 6px rgba(244,63,94,.5))}
.like-count{font-size:12px; color:var(--muted); margin-left:4px}

/* Images */
img.message-img{max-width:100%; border-radius:10px; margin-top:6px; display:block}

/* ========== Composer ========== */
.composer{
  position:sticky; bottom:0; z-index:3;
  display:flex; align-items:center; gap:10px; padding:10px; border-top:1px solid var(--border);
  background:linear-gradient(180deg,#0f172a,#0b1220)
}
.light .composer{background:linear-gradient(180deg,#fff,#f8fafc)}
.composer input[type="text"]{
  flex:1; padding:10px 14px; border:1px solid var(--border); border-radius:12px; font-size:16px;
  background:var(--panel2); color:var(--text); outline:none
}
.icon-btn{font-size:22px; background:transparent; border:1px solid var(--border); color:var(--text); cursor:pointer; border-radius:10px; padding:.35rem .55rem}
.send{background:linear-gradient(180deg,#22d3ee,#38bdf8); border:0; color:#001018; font-weight:800; border-radius:12px; padding:.6rem .9rem; cursor:pointer}
.send:active{transform:translateY(1px)}

/* Emoji picker */
#emojiPicker{
  position:fixed; bottom:76px; left:10px; background:var(--panel); padding:8px; border:1px solid var(--border);
  border-radius:12px; display:flex; flex-wrap:wrap; gap:6px; max-width:92%; box-shadow:0 14px 30px rgba(0,0,0,.3); z-index:10
}
#emojiPicker .emoji-item{font-size:20px; background:transparent; border:0; cursor:pointer}
.hidden{display:none !important}

/* Toast */
.toast{position:fixed; right:16px; bottom:16px; background:var(--panel2); border:1px solid var(--border);
  color:var(--text); padding:.55rem .75rem; border-radius:10px; opacity:0; transform:translateY(10px); transition:.2s}
.toast.show{opacity:1; transform:translateY(0)}

/* Responsive */
@media (max-width:640px){
  .title .sub{display:none}
  .ribbon{display:none}
  .message{max-width:86%}
}
